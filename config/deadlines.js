export const DEADLINES = {
  budget: {
    title: "ðŸŽ“ Ð‘ÑŽÐ´Ð¶ÐµÑ‚Ð½Ð°Ñ Ð¾ÑÐ½Ð¾Ð²Ð°",
    deadlines: [
      { date: "20 Ð¸ÑŽÐ½Ñ 2026", description: "ÐÐ°Ñ‡Ð°Ð»Ð¾ Ð¿Ñ€Ð¸ÐµÐ¼Ð° Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð¾Ð²" },
      { date: "15 Ð¸ÑŽÐ»Ñ 2026", description: "Ð—Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¸ÐµÐ¼Ð° Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð¾Ð² Ð´Ð»Ñ Ð°Ð±Ð¸Ñ‚ÑƒÑ€Ð¸ÐµÐ½Ñ‚Ð¾Ð², Ð¿Ð¾ÑÑ‚ÑƒÐ¿Ð°ÑŽÑ‰Ð¸Ñ… Ð½Ð° Ð½Ð°Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ Ð¿Ð¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²ÐºÐ¸ Ð¸ ÑÐ¿ÐµÑ†Ð¸Ð°Ð»ÑŒÐ½Ð¾ÑÑ‚Ð¸ ÑÐ¾ ÑÐ´Ð°Ñ‡ÐµÐ¹ Ñ‚Ð²Ð¾Ñ€Ñ‡ÐµÑÐºÐ¸Ñ… Ð¸ Ð¾Ð±Ñ‰ÐµÐ¾Ð±Ñ€Ð°Ð·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ñ… Ð²ÑÑ‚ÑƒÐ¿Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ñ… Ð¸ÑÐ¿Ñ‹Ñ‚Ð°Ð½Ð¸Ð¹, Ð¿Ñ€Ð¾Ð²Ð¾Ð´Ð¸Ð¼Ñ‹Ñ… Ð”Ð’Ð¤Ð£ ÑÐ°Ð¼Ð¾ÑÑ‚Ð¾ÑÑ‚ÐµÐ»ÑŒÐ½Ð¾*", time: "Ð´Ð¾ 19:00" },
      { date: "25 Ð¸ÑŽÐ»Ñ 2026", description: "Ð—Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¸ÐµÐ¼Ð° Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð¾Ð² Ð½Ð° Ð±ÑŽÐ´Ð¶ÐµÑ‚Ð½ÑƒÑŽ Ñ„Ð¾Ñ€Ð¼Ñƒ Ð¾Ð±ÑƒÑ‡ÐµÐ½Ð¸Ñ. Ð—Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¸Ðµ ÑÑ€Ð¾ÐºÐ° ÑƒÐºÐ°Ð·Ð°Ð½Ð¸Ñ Ð¿Ñ€Ð¸Ð¾Ñ€Ð¸Ñ‚ÐµÑ‚Ð¾Ð² Ð·Ð°Ñ‡Ð¸ÑÐ»ÐµÐ½Ð¸Ñ**" },
      { date: "27 Ð¸ÑŽÐ»Ñ 2026", description: "ÐŸÑƒÐ±Ð»Ð¸ÐºÐ°Ñ†Ð¸Ñ ÐºÐ¾Ð½ÐºÑƒÑ€ÑÐ½Ñ‹Ñ… ÑÐ¿Ð¸ÑÐºÐ¾Ð²" },
      { date: "1 Ð°Ð²Ð³ÑƒÑÑ‚Ð° 2026", description: "Ð—Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¸ÐµÐ¼Ð° ÑÐ¾Ð³Ð»Ð°ÑÐ¸Ð¹ Ð½Ð° Ð·Ð°Ñ‡Ð¸ÑÐ»ÐµÐ½Ð¸Ðµ Ñƒ Ð¿Ñ€Ð¸Ð¾Ñ€Ð¸Ñ‚ÐµÑ‚Ð½Ð¾Ð³Ð¾ ÑÑ‚Ð°Ð¿Ð° Ð·Ð°Ñ‡Ð¸ÑÐ»ÐµÐ½Ð¸Ñ", time: "Ð´Ð¾ 19:00" },
      { date: "5 Ð°Ð²Ð³ÑƒÑÑ‚Ð° 2026", description: "Ð—Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¸ÐµÐ¼Ð° ÑÐ¾Ð³Ð»Ð°ÑÐ¸Ð¹ Ð½Ð° Ð·Ð°Ñ‡Ð¸ÑÐ»ÐµÐ½Ð¸Ðµ Ñƒ Ð¾ÑÐ½Ð¾Ð²Ð½Ð¾Ð³Ð¾ ÑÑ‚Ð°Ð¿Ð° Ð·Ð°Ñ‡Ð¸ÑÐ»ÐµÐ½Ð¸Ñ", time: "Ð´Ð¾ 19:00" },
      { date: "2 Ð°Ð²Ð³ÑƒÑÑ‚Ð° 2026", description: "ÐŸÑƒÐ±Ð»Ð¸ÐºÐ°Ñ†Ð¸Ñ Ð¿Ñ€Ð¸ÐºÐ°Ð·Ð¾Ð² Ð¿Ñ€Ð¸Ð¾Ñ€Ð¸Ñ‚ÐµÑ‚Ð½Ð¾Ð³Ð¾ ÑÑ‚Ð°Ð¿Ð° Ð·Ð°Ñ‡Ð¸ÑÐ»ÐµÐ½Ð¸Ñ", endDate: "3 Ð°Ð²Ð³ÑƒÑÑ‚Ð° 2026" },
      { date: "6 Ð°Ð²Ð³ÑƒÑÑ‚Ð° 2026", description: "ÐŸÑƒÐ±Ð»Ð¸ÐºÐ°Ñ†Ð¸Ñ Ð¿Ñ€Ð¸ÐºÐ°Ð·Ð¾Ð² Ð¾ÑÐ½Ð¾Ð²Ð½Ð¾Ð³Ð¾ ÑÑ‚Ð°Ð¿Ð° Ð·Ð°Ñ‡Ð¸ÑÐ»ÐµÐ½Ð¸Ñ", endDate: "7 Ð°Ð²Ð³ÑƒÑÑ‚Ð° 2026" }
    ]
  },
  paid: {
    title: "ðŸ’³ ÐŸÐ»Ð°Ñ‚Ð½Ð°Ñ Ð¾ÑÐ½Ð¾Ð²Ð°",
    deadlines: [
      { date: "13 Ð°Ð²Ð³ÑƒÑÑ‚Ð° 2026", description: "Ð—Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¸ÐµÐ¼Ð° Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð¾Ð² Ð´Ð»Ñ Ð°Ð±Ð¸Ñ‚ÑƒÑ€Ð¸ÐµÐ½Ñ‚Ð¾Ð², Ð¿Ð¾ÑÑ‚ÑƒÐ¿Ð°ÑŽÑ‰Ð¸Ñ… Ð½Ð° Ð½Ð°Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ Ð¿Ð¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²ÐºÐ¸ Ð¸ ÑÐ¿ÐµÑ†Ð¸Ð°Ð»ÑŒÐ½Ð¾ÑÑ‚Ð¸ ÑÐ¾ ÑÐ´Ð°Ñ‡ÐµÐ¹ Ñ‚Ð²Ð¾Ñ€Ñ‡ÐµÑÐºÐ¸Ñ… Ð¸ Ð¾Ð±Ñ‰ÐµÐ¾Ð±Ñ€Ð°Ð·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ñ… Ð²ÑÑ‚ÑƒÐ¿Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ñ… Ð¸ÑÐ¿Ñ‹Ñ‚Ð°Ð½Ð¸Ð¹, Ð¿Ñ€Ð¾Ð²Ð¾Ð´Ð¸Ð¼Ñ‹Ñ… Ð”Ð’Ð¤Ð£ ÑÐ°Ð¼Ð¾ÑÑ‚Ð¾ÑÑ‚ÐµÐ»ÑŒÐ½Ð¾*", time: "Ð´Ð¾ 19:00" },
      { date: "13 Ð°Ð²Ð³ÑƒÑÑ‚Ð° 2026", description: "Ð—Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¸ÐµÐ¼Ð° Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð¾Ð² Ð¿Ð¾ÑÑ‚ÑƒÐ¿Ð°ÑŽÑ‰Ð¸Ñ… Ð¿Ð¾ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ð°Ð¼ Ð•Ð“Ð­" },
      { date: "15 Ð°Ð²Ð³ÑƒÑÑ‚Ð° 2026", description: "ÐŸÑ€Ð¾Ð²ÐµÐ´ÐµÐ½Ð¸Ðµ Ð²Ð½ÑƒÑ‚Ñ€ÐµÐ½Ð½Ð¸Ñ… Ð²ÑÑ‚ÑƒÐ¿Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ñ… Ð¸ÑÐ¿Ñ‹Ñ‚Ð°Ð½Ð¸Ð¹", prefix: "Ð´Ð¾" },
      { date: "16 Ð°Ð²Ð³ÑƒÑÑ‚Ð° 2026", description: "Ð—Ð°ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ Ð´Ð¾Ð³Ð¾Ð²Ð¾Ñ€Ð°", time: "Ð´Ð¾ 19:00", prefix: "Ð´Ð¾" },
      { date: "24 Ð°Ð²Ð³ÑƒÑÑ‚Ð° 2026", description: "ÐŸÑƒÐ±Ð»Ð¸ÐºÐ°Ñ†Ð¸Ñ Ð¿Ñ€Ð¸ÐºÐ°Ð·Ð¾Ð² Ð¿Ð»Ð°Ñ‚Ð½Ð¾Ð¹ Ð¾ÑÐ½Ð¾Ð²Ñ‹", prefix: "Ð´Ð¾" }
    ]
  },
  notes: [
    "* ÐŸÐ¾ÑÑ‚ÑƒÐ¿Ð°ÑŽÑ‰Ð¸Ðµ Ð¿Ð¾ Ð½Ð°Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸ÑÐ¼ Ð¿Ð¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²ÐºÐ¸ Â«ÐÑ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð°Â», Â«Ð”Ð¸Ð·Ð°Ð¹Ð½Â», Â«Ð–ÑƒÑ€Ð½Ð°Ð»Ð¸ÑÑ‚Ð¸ÐºÐ°Â», Â«Ð¤Ð¸Ð·Ð¸Ñ‡ÐµÑÐºÐ°Ñ ÐºÑƒÐ»ÑŒÑ‚ÑƒÑ€Ð°Â».",
    "** Ð’Ñ‹Ð¿ÑƒÑÐºÐ½Ð¸ÐºÐ¸ ÐºÐ¾Ð»Ð»ÐµÐ´Ð¶ÐµÐ¹, Ñ‚ÐµÑ…Ð½Ð¸ÐºÑƒÐ¼Ð¾Ð² Ñ Ð´Ð¸Ð¿Ð»Ð¾Ð¼Ð¾Ð¼ Ð¡ÐŸÐž. Ð˜Ð½Ð²Ð°Ð»Ð¸Ð´Ñ‹.",
    "*** Ð˜Ð½Ñ‹Ðµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸ Ð°Ð±Ð¸Ñ‚ÑƒÑ€Ð¸ÐµÐ½Ñ‚Ð¾Ð², ÑÐ¾Ð³Ð»Ð°ÑÐ½Ð¾ Ð¿Ñ€Ð°Ð²Ð¸Ð»Ð°Ð¼ Ð¿Ñ€Ð¸ÐµÐ¼Ð°."
  ]
};

// Ð£Ð»ÑƒÑ‡ÑˆÐµÐ½Ð½Ð°Ñ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ñ Ð´Ð»Ñ Ñ€Ð°ÑÑ‡ÐµÑ‚Ð° Ð´Ð½ÐµÐ¹ Ð´Ð¾ Ð´ÐµÐ´Ð»Ð°Ð¹Ð½Ð°
export function getDaysUntilDeadline(deadline) {
  try {
    const parseDate = (dateStr) => {
      if (!dateStr) return null;
      
      const months = {
        'ÑÐ½Ð²Ð°Ñ€Ñ': 0, 'Ñ„ÐµÐ²Ñ€Ð°Ð»Ñ': 1, 'Ð¼Ð°Ñ€Ñ‚Ð°': 2, 'Ð°Ð¿Ñ€ÐµÐ»Ñ': 3,
        'Ð¼Ð°Ñ': 4, 'Ð¸ÑŽÐ½Ñ': 5, 'Ð¸ÑŽÐ»Ñ': 6, 'Ð°Ð²Ð³ÑƒÑÑ‚Ð°': 7,
        'ÑÐµÐ½Ñ‚ÑÐ±Ñ€Ñ': 8, 'Ð¾ÐºÑ‚ÑÐ±Ñ€Ñ': 9, 'Ð½Ð¾ÑÐ±Ñ€Ñ': 10, 'Ð´ÐµÐºÐ°Ð±Ñ€Ñ': 11
      };
      
      // ÐžÐ±Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°ÐµÐ¼ Ñ€Ð°Ð·Ð½Ñ‹Ðµ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ñ‹ Ð´Ð°Ñ‚
      const match = dateStr.match(/(\d{1,2})\s+([Ð°-Ñ]+)\s+(\d{4})/);
      if (match) {
        const day = parseInt(match[1]);
        const month = months[match[2]];
        const year = parseInt(match[3]);
        
        if (month !== undefined) {
          return new Date(year, month, day);
        }
      }
      return null;
    };

    // Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð¾ÑÐ½Ð¾Ð²Ð½ÑƒÑŽ Ð´Ð°Ñ‚Ñƒ Ð¸Ð»Ð¸ ÐºÐ¾Ð½ÐµÑ‡Ð½ÑƒÑŽ Ð´Ð°Ñ‚Ñƒ Ð´Ð»Ñ Ð´Ð¸Ð°Ð¿Ð°Ð·Ð¾Ð½Ð¾Ð²
    const targetDateStr = deadline.endDate || deadline.date;
    const targetDate = parseDate(targetDateStr);
    
    if (!targetDate) return null;

    const today = new Date();
    today.setHours(0, 0, 0, 0);
    
    const diff = targetDate.getTime() - today.getTime();
    const daysLeft = Math.ceil(diff / (1000 * 60 * 60 * 24));
    
    return daysLeft;
  } catch (error) {
    console.error('ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ Ñ€Ð°ÑÑ‡ÐµÑ‚Ðµ Ð´Ð½ÐµÐ¹ Ð´Ð»Ñ Ð´ÐµÐ´Ð»Ð°Ð¹Ð½Ð°:', deadline, error);
    return null;
  }
}

// Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ Ð´Ð»Ñ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ Ð´Ð°Ñ‚Ñ‹ Ñ Ð²Ñ€ÐµÐ¼ÐµÐ½ÐµÐ¼ Ð¸ Ð¿Ñ€ÐµÑ„Ð¸ÐºÑÐ¾Ð¼
export function formatDeadlineDate(deadline) {
  let dateStr = deadline.date;
  
  if (deadline.prefix) {
    dateStr = `${deadline.prefix} ${dateStr}`;
  }
  
  if (deadline.time) {
    dateStr = `${dateStr} ${deadline.time}`;
  }
  
  if (deadline.endDate) {
    dateStr = `${dateStr}-${deadline.endDate.split(' ')[0]} ${deadline.endDate.split(' ')[1]} ${deadline.endDate.split(' ')[2]}`;
  }
  
  return dateStr;
}

// Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ Ð´Ð»Ñ Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ñ Ð±Ð»Ð¸Ð¶Ð°Ð¹ÑˆÐ¸Ñ… Ð´ÐµÐ´Ð»Ð°Ð¹Ð½Ð¾Ð²
export function getUpcomingDeadlines() {
  const allDeadlines = [
    ...DEADLINES.budget.deadlines.map(d => ({ ...d, type: 'budget' })),
    ...DEADLINES.paid.deadlines.map(d => ({ ...d, type: 'paid' }))
  ];

  return allDeadlines
    .map(deadline => {
      const daysLeft = getDaysUntilDeadline(deadline);
      return { 
        ...deadline, 
        daysLeft,
        formattedDate: formatDeadlineDate(deadline)
      };
    })
    .filter(deadline => deadline.daysLeft !== null)
    .sort((a, b) => a.daysLeft - b.daysLeft)
    .slice(0, 5);
}